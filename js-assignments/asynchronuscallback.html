<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Asyncronus callback</title>
        <style>
            img {
                width: 100px;
            }
        </style>
    </head>

    <body>
        <div id="console-root"></div>
        <script src="https://s3-ap-southeast-1.amazonaws.com/beta.tap.ibhubs.in/console.js"></script>
        <script>
            // const member = new Person('Lydia', 'Hallie');
            // Person.getFullName = function() {
            //     return `${this.firstName} ${this.lastName}`;
            // };

            // console.log(member.getFullName());


            // function Person(firstName, lastName) {
            //     this.firstName = firstName;
            //     this.lastName = lastName;
            // }
            // const member2 = new Person('Lydia2', 'Hallie2');
            // member2.getFullName = function() {
            //     return `${this.firstName} ${this.lastName}`;
            // };
            // console.log(member2.getFullName());

            // class Person {
            //     constructor(firstName, lastName) {
            //         this.firstName = firstName;
            //         this.lastName = lastName;
            //     }
            //     static getFullName() {
            //         return `${this.firstName} ${this.lastName}`;
            //     };
            // }
            // Person.firstName = 'override firstName';
            // Person.lastName = 'override lasttName';
            // //  const member1 = new Person('Lydia1', 'Hallie1');
            // //  console.log(member1.getFullName);
            // console.log(Person.getFullName());

            // console.log('first statement');
            // let userDetails;
            // getUserDetails(1, function(userDetails) {
            //     console.log("userDetails", userDetails);
            // });
            // console.log('last details');

            // function getUserDetails(id, callback) {
            //     setTimeout(() => {
            //         console.log('Takes 2 sec time');
            //         callback({ id: id, userName: 'jack' });
            //     }, 2000);
            // }


            // function loadImage(url, onSuccessLoadImage) {
            //     const imgEle = document.createElement('img');
            //     imgEle.onload = () => {
            //         console.log(`${url} Image is loaded`);
            //         onSuccessLoadImage(imgEle);
            //     };
            //     setTimeout(() => { imgEle.src = url }, 3000);
            // }
            // loadImage('../js-assignments/assignment-3/assets/on.png', imgEle => {
            //     document.body.appendChild(imgEle);
            //     console.log('image is appended to the body');
            // });


            //     function loadImage(url, onSuccessLoadImage) {
            //         const imgEle = document.createElement('img');
            //         imgEle.onload = () => {
            //             console.log(`${url} Image is loaded`);
            //             onSuccessLoadImage(imgEle);
            //         };
            //         setTimeout(() => { imgEle.src = url }, 3000);
            //     }
            //     loadImage('../js-assignments/assignment-3/assets/on.png', imgEle => {
            //         console.log('image1 is appended to the body');
            //   document.body.appendChild(imgEle);

            //         loadImage('../js-assignments/assignment-3/assets/on.png', imgEle => {
            //             document.body.appendChild(imgEle);
            //             console.log('image2 is appended to the body. this image loaded after 3secs of 1st img is loaded');

            //    });
            // });

            //promise

            // function loadImageWithPromise(url) {
            //     return new Promise(() => { //here returning callback function 
            //         const imgEle = document.createElement('img');
            //         imgEle.onload = () => {
            //             console.log(`${url} image is loaded`);
            //             document.body.appendChild(imgEle);
            //         };
            //         setTimeout(() => { imgEle.src = url; }, 3000);
            //     });
            // }
            // loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');

            // function loadImageWithPromise(url) {
            //     return new Promise(resolve => { //here returning callback function 
            //         const imgEle = document.createElement('img');
            //         imgEle.onload = () => {
            //             console.log(`${url} image is loaded`);
            //             // resolve(imgEle);
            //             resolve('random');
            //         };
            //         setTimeout(() => { imgEle.src = url; }, 3000);
            //     });
            // }
            // const something = loadImageWithPromise('../js-assignments/assignment-3/assets/on.png').then((response) => {
            //     console.log(response);
            //     // console.log(response1);
            //     document.body.appendChild(response);
            // }); //random string
            //   console.log(something);

            // something.then(response => {
            //     console.log(response);
            // });

            // const firstImagePromise = loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            // console.log(firstImagePromise);
            // const secondImagePromise = firstImagePromise.then(response => {
            //     document.body.appendChild(response);
            //     //   resolve('random');
            // });
            // const thirdImagePromise = secondImagePromise.then(response => {
            //     console.log(response);
            // });

            // function loadImageWithPromise(url) {
            //     return new Promise(resolve => { //here returning callback function 
            //         const imgEle = document.createElement('img');
            //         imgEle.onload = () => {
            //             console.log(`${url} image is loaded`);
            //             //  resolve(imgEle);
            //             //  resolve(imgEle);
            //             resolve('random1');
            //             resolve('random2');

            //         };
            //         setTimeout(() => { imgEle.src = url; }, 3000);
            //     });
            // }

            // const firstImagePromise = loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            // const secondImagePromise = firstImagePromise.then(response => {
            //     //document.body.appendChild(response);
            //     //resolve(response);
            //     console.log('firstImagePromise then:', response);
            //     //  return undefined;
            //     return;
            // });
            // secondImagePromise.then(response => {
            //     console.log('secondImagePromise then:', response);
            // });


            // function loadImageWithPromise(url) {
            //     return new Promise(resolve => { //here returning callback function 
            //         const imgEle = document.createElement('img');
            //         imgEle.onload = () => {
            //             console.log(`${url} image is loaded`);
            //             resolve('random1');
            //         };
            //         setTimeout(() => { imgEle.src = url; }, 1000);
            //     });
            // }

            // const firstImagePromise = loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            // firstImagePromise.then(response => {
            //     console.log('firstImagePromise then:', response);
            // });
            // firstImagePromise.then(response => {
            //     console.log('secondImagePromise then:', response);
            // });

            //chaining of promises

            // function loadImageWithPromise(url) {
            //     return new Promise(resolve => { //here returning callback function 
            //         const imgEle = document.createElement('img');
            //         imgEle.onload = () => {
            //             console.log(`${url} image is loaded`);
            //             //here operation is completed
            //             resolve(imgEle);
            //         };
            //         setTimeout(() => { imgEle.src = url; }, 1000);
            //     });
            // }

            // loadImageWithPromise('../js-assignments/assignment-3/assets/on.png').then(response => {
            //         document.body.appendChild(response);
            //         return loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            //     })
            //     .then(response => {
            //         document.body.appendChild(response);
            //         return loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            //     });

            //chaining promises way 2 
            // loadImageWithPromise('../js-assignments/assignment-3/assets/on.png').then(response => {
            //     document.body.appendChild(response);

            //     loadImageWithPromise('../js-assignments/assignment-3/assets/on.png').then(response => {
            //         document.body.appendChild(response);
            //     });
            // });

            //error throwing
            // function loadImageWithPromise(url) {
            //     return new Promise((resolve, reject) => { //here returning callback function 
            //         const imgEle = document.createElement('img');
            //         imgEle.onload = () => {
            //             console.log(`${url} image is loaded`);
            //             //here operation is completed
            //             //   reject(new Error('error by reject with new&Error')) //here we can knowwhere we got error
            //             resolve(imgEle);
            //         };
            //         //     random();
            //         //  throw 'error throwing by using throw key word';
            //         //reject('error throwing by using reject');
            //         // console.log('after reject');
            //         setTimeout(() => { imgEle.src = url; }, 1000);
            //     });
            // }

            // loadImageWithPromise('../js-assignments/assignment-3/assets/on.png').then(response => {
            //     //       document.body.appendChild(response);
            //     return loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            // }).catch(e => {
            //     console.log(e);

            // }).then(response => {
            //     console.log('after catch then', response);
            //     document.body.appendChild(response);
            //     //    response.style.width = '50px';
            //     //    return loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            // });

            //part-5
            //async and wait

            function loadImageWithPromise(url) {
                return new Promise(resolve => { //here returning callback function 
                    const imgEle = document.createElement('img');
                    imgEle.onload = () => {
                        console.log(`${url} image is loaded`);
                        //here operation is completed
                        resolve(imgEle);
                    };
                    setTimeout(() => { imgEle.src = url; }, 1000);
                });
            }

            // async function getAllImages() {
            //     try {
            //         console.log('firstImage');
            //         const firstImage = await loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            //         document.body.appendChild(firstImage);
            //         const secondImage = await loadImageWithPromise('../js-assignments/assignment-3/assets/on.png');
            //         document.body.appendChild(secondImage);
            //         console.log(firstImage);
            //         console.log('lastImage');
            //     }
            //     catch (e) {
            //         console.log(e);
            //     }
            // }
            // getAllImages();
            // console.log('hi');

            //fetch

            fetch('../js-assignments/assignment-3/assets/on.png').then(response => {
                console.log('fetch:', response);
                console.log(Object.keys(response));
            });
            // fetch('https://jsonplaceholder.typicode.com/posts').then(response => {
            //     return response.json();
            // }).then(json => { console.log(json) });
        </script>
    </body>

</html>
